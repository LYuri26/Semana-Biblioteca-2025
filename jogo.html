<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BirdBox Game - Em Andamento</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="estilos/jogo.css">
</head>

<body>
    <div class="game-container">
        <!-- Overlay de Carregamento -->
        <div id="loadingOverlay" class="game-overlay active">
            <div class="loading-content">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Carregando...</span>
                </div>
                <p>Preparando o jogo...</p>
            </div>
        </div>

        <!-- Header do Jogo -->
        <header class="game-header">
            <div class="header-content">
                <h1 class="game-title">BirdBox</h1>
                <div class="game-info">
                    <div class="info-item">
                        <span class="info-label">Tempo:</span>
                        <span id="gameTimer">03:00</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Rodada:</span>
                        <span id="currentRound">1/4</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Pontos:</span>
                        <span id="playerScore">0</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Conte√∫do Principal do Jogo -->
        <main class="game-main">
            <!-- Vis√£o do Ouvinte -->
            <div id="listenerView" class="game-view hidden">
                <div class="role-header">
                    <h2>üéß Voc√™ √© o Ouvinte</h2>
                    <p class="role-description">Escute atentamente e descreva o som para seu parceiro</p>
                </div>

                <div class="sound-section">
                    <div class="audio-player">
                        <audio id="soundPlayer" controls></audio>
                        <div class="audio-controls">
                            <button id="playSound" class="audio-btn">
                                <span class="audio-icon">‚ñ∂Ô∏è</span>
                                Reproduzir Som
                            </button>
                            <button id="replaySound" class="audio-btn" disabled>
                                <span class="audio-icon">üîÅ</span>
                                Repetir
                            </button>
                        </div>
                    </div>

                    <div class="description-guide">
                        <h4>Como Descrever:</h4>
                        <ul>
                            <li>Descreva o som com suas pr√≥prias palavras</li>
                            <li>Use compara√ß√µes e met√°foras</li>
                            <li>Mencione a intensidade e ritmo</li>
                            <li>Descreva as sensa√ß√µes que o som provoca</li>
                        </ul>
                    </div>
                </div>

                <div class="current-status">
                    <div class="status-card">
                        <h4>Status da Partida</h4>
                        <p id="partnerStatus">Aguardando descri√ß√£o do parceiro...</p>
                        <p id="roundInfo">Rodada 1 de 4</p>
                    </div>
                </div>

                <!-- Controles de Navega√ß√£o (OUVINTE) -->
                <div class="navigation-controls">
                    <button id="prevRound" class="nav-btn" disabled>‚Üê Anterior</button>
                    <span id="roundNumber">1/4</span>
                    <button id="nextRound" class="nav-btn">Pr√≥xima ‚Üí</button>
                    <button id="finishGameListener" class="finish-btn">Finalizar Jogo</button>
                </div>
            </div>

            <!-- Vis√£o do Adivinhador -->
            <div id="identifierView" class="game-view hidden">
                <div class="role-header">
                    <h2>üîç Voc√™ √© o Adivinhador</h2>
                    <p class="role-description">Escute as descri√ß√µes e identifique o som correto</p>
                </div>

                <div class="description-section">
                    <div class="partner-description-card">
                        <h4>Descri√ß√£o do Parceiro:</h4>
                        <div id="partnerDescription" class="description-text">
                            Aguardando descri√ß√£o do ouvinte...
                        </div>
                    </div>
                </div>

                <div class="options-section">
                    <h4>Selecione a op√ß√£o correta:</h4>
                    <div id="optionsContainer" class="options-grid">
                        <div class="option-btn" data-option="0">
                            <span class="option-text">Carregando op√ß√£o 1...</span>
                        </div>
                        <div class="option-btn" data-option="1">
                            <span class="option-text">Carregando op√ß√£o 2...</span>
                        </div>
                        <div class="option-btn" data-option="2">
                            <span class="option-text">Carregando op√ß√£o 3...</span>
                        </div>
                        <div class="option-btn" data-option="3">
                            <span class="option-text">Carregando op√ß√£o 4...</span>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="submitAnswer" class="submit-btn" disabled>
                        Confirmar Resposta
                    </button>
                    <button id="finishGameIdentifier" class="finish-btn">Finalizar Jogo</button>
                </div>
            </div>
        </main>

        <!-- Overlay de Fim de Jogo -->
        <div id="gameOverOverlay" class="game-overlay">
            <div class="game-result">
                <h2>Fim de Jogo!</h2>
                <div class="score-display">
                    <p class="final-score">Pontua√ß√£o Final: <span id="finalScore">0</span></p>
                    <p class="rounds-completed">Rodadas Completas: <span id="roundsCompleted">0</span>/4</p>
                    <p class="accuracy">Precis√£o: <span id="accuracyPercentage">0%</span></p>
                </div>
                <div class="result-actions">
                    <button id="playAgainBtn" class="action-btn primary">
                        Jogar Novamente
                    </button>
                    <button id="mainMenuBtn" class="action-btn secondary">
                        Menu Principal
                    </button>
                </div>
            </div>
        </div>

        <!-- Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

        <!-- Nossos scripts -->
        <script src="scripts/firebase/config.js"></script>
        <script src="scripts/firebase/database.js"></script>
        <script src="scripts/util.js"></script>

        <!-- Primeiro carrega as classes base -->
        <script src="scripts/jogo.js"></script>

        <!-- Depois carrega os gerenciadores que dependem das classes base -->
        <script src="scripts/perguntas.js"></script>
        <script src="scripts/ouvinte.js"></script>
        <script src="scripts/leitor.js"></script>
    </div>
</body>

</html>